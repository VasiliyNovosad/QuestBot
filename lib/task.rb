# {
#     "ReplaceNlToBr": false,
#     "TaskText": "\u003ci\u003eХохо. Пахан просто так не отпустит последнего братка. Надо поднабрать респекта у местных авторитетов\u003c/i\u003e\u003cbr\u003e\r\n\u003chr\u003e\r\n\u003cb\u003e\u003cy\u003eДля квартета освобожденных:\u003c/y\u003e\u003c/b\u003e\u003cbr\u003e\r\n\u003cbr\u003e\r\n- Вам нужно собрать 100 \"ванечков\" респекта!\u003cbr\u003e\r\n- В бонусах открыты места \"авторитетов\", где вы можете получить определенное количество \"ванечков\".\u003cbr\u003e\r\n- У каждого авторитета есть \u003cb\u003eИмя\u003c/b\u003e, \u003cb\u003eЛокация\u003c/b\u003e (где он находится) и \u003cb\u003eКоличество\u003c/b\u003e \"ванечков\", которое он дает.\u003cbr\u003e\r\n- Некоторые авторитеты требуют, чтобы вы до того как пойдете к ним - прошли других низкоуровневых авторитетов.\u003cbr\u003e\r\n- Чтобы получить допуск - скажите кодовые фразы от требуемых низкоуровневых авторитетов (Вы их получите закрыв бонусы этих авторитетов).\u003cbr\u003e\r\n- Для удобства вам будет доступен \"Ванечкометр\":\u003cbr\u003e\u003cbr\u003e\r\n\u003ccenter\u003e\u003ch3\u003eВанечкометр\u003c/h3\u003e\u003c/center\u003e\r\n\u003cdiv class=\"line\"\u003e\r\n    \u003cdiv class=\"line-value\"\u003e\u003c/div\u003e\r\n    \u003cdiv class=\"value\"\u003e\u003c/div\u003e\r\n  \u003c/div\u003e\r\n\u003ccenter\u003e\u003cdiv\u003eУ вас \u003cspan id=\"result\"\u003e0\u003c/span\u003e ванечков респекта\u003c/div\u003e \u003c/center\u003e\r\n\u003cbr\u003e\r\n\r\n\u003cb\u003e\u003ca id=\"show\"\u003e\u003cy\u003eДля остальных полевиков и штаба:\u003c/y\u003e\u003c/a\u003e\u003c/b\u003e\u003cbr\u003e\r\n\u003cbr\u003e\r\n\u003cp id=\"shtab\"\u003e\u003ci\u003eА не кинули ли меня часом, прибудут ли братаны за мной? Я уже свою шконку и нары видеть не могу\u003c/i\u003e\u003cbr\u003e\r\n\u003cbr\u003e\r\n\u003co\u003eЗона 1\u003c/o\u003e: поиск маркера\u003cbr\u003e\r\n\u003cm\u003eЗона поиска\u003c/m\u003e: Ближние 10 рядов кресел к оркестровой яме/cцене\u003cbr\u003e\r\n\u003cm\u003eКоличество кодов\u003c/m\u003e: 60\u003cbr\u003e\r\n\u003cm\u003eНанесение\u003c/m\u003e: маркер\u003cbr\u003e\r\n\u003cm\u003eБонусное время за каждый\u003c/m\u003e: 15 секунд\u003cbr\u003e\r\n\u003cbr\u003e\r\n\u003co\u003eЗона 2\u003c/o\u003e: поиск по метке\u003cbr\u003e\r\n\u003cm\u003eЗона поиска\u003c/m\u003e: Стены, сцена, оркестровая яма\u003cbr\u003e\r\n\u003cm\u003eКоличество меток\u003c/m\u003e: 30\u003cbr\u003e\r\n\u003cm\u003eКоличество кодов рядом с каждой меткой\u003c/m\u003e: 2, в радиусе 1.5-2 метров от метки\u003cbr\u003e\r\n\u003cm\u003eНанесение\u003c/m\u003e: маркер-микромаркер\u003cbr\u003e\r\n\u003cm\u003eБонусное время за каждый\u003c/m\u003e: 15 секунд\u003cbr\u003e\r\n\u003cbr\u003e\r\n\u003co\u003eЗона 3\u003c/o\u003e: поиск микромаркера\u003cbr\u003e\r\n\u003cm\u003eЗона поиска\u003c/m\u003e: Верхние ряды, начиная от входа, заканчивая центральным поперечным проходом \u003cbr\u003e\r\n\u003cm\u003eКоличество кодов\u003c/m\u003e: 102\u003cbr\u003e\r\n\u003cm\u003eНанесение\u003c/m\u003e: микромаркер\u003cbr\u003e\r\n\u003cm\u003eБонусное время за каждый\u003c/m\u003e: 30 секунд\u003cbr\u003e\r\n\u003cbr\u003e\r\n\u003ci\u003eПилите до тех пор, пока всю вашу команду не освободят\u003c/i\u003e\u003cbr\u003e\r\n\u003cbr\u003e\r\n\u003cb\u003e\u003cy\u003eДля штаба:\u003c/y\u003e\u003c/b\u003e\u003cbr\u003e\r\n\u003cbr\u003e\r\n\u003cb\u003eВрывайтесь и помогайте своему полю\u003c/b\u003e\u003cbr\u003eА так же вам доступны 6 бонусных логик.\u003cbr\u003e\r\n\u003c/p\u003e\r\n\u003cstyle\u003e#shtab{display:none} #show:hover{cursor:pointer}\u003c/style\u003e\r\n\r\n\u003cscript\u003e\r\n$(\u0027#show\u0027).click(function(){\r\n$( \"#shtab\" ).toggle( \"fast\", function() {\r\n});\r\n})\r\n\u003c/script\u003e\r\n\r\n\u003cstyle\u003e\r\nm{color:yellow}\r\ny{font-size:18px}\r\no{color:red}\r\n.line {\r\n      margin: 30px auto;\r\n      position: relative;\r\n      background-color: lightgrey;\r\n      opacity: 0.8;\r\n      height: 40px;\r\n      width: 80%;\r\n      border-radius: 25px;\r\n      background-image:\r\n         -webkit-gradient(linear, 0 0, 100% 100%,\r\n            color-stop(.25, rgba(255, 255, 255, .2)),\r\n            color-stop(.25, transparent), color-stop(.5, transparent),\r\n            color-stop(.5, rgba(255, 255, 255, .2)),\r\n            color-stop(.75, rgba(255, 255, 255, .2)),\r\n            color-stop(.75, transparent), to(transparent)\r\n         );\r\n    }\r\n    .line-value {\r\n      background-image:\r\n         -webkit-gradient(linear, 0 0, 100% 100%,\r\n            color-stop(.25, rgba(255, 255, 255, .2)),\r\n            color-stop(.25, transparent), color-stop(.5, transparent),\r\n            color-stop(.5, rgba(255, 255, 255, .2)),\r\n            color-stop(.75, rgba(255, 255, 255, .2)),\r\n            color-stop(.75, transparent), to(transparent)\r\n         );\r\n      background-color: darkorange;\r\n      height: 40px;\r\n      width: 00%;\r\n      border-top-left-radius: 25px;\r\n      border-bottom-left-radius: 25px;\r\n    }\r\n    .value {\r\n      position: absolute;\r\n      height: 100px;\r\n      width: 100px;\r\n      background-image: url(http://d1.endata.cx/data/games/58515/vane4ek3.png);\r\n      left: 00%;\r\n      top: 50%;\r\n      transform: translate(-50%, -50%);\r\n    }\r\n\u003c/style\u003e",
#     "TaskTextFormatted": "\u003ci\u003eХохо. Пахан просто так не отпустит последнего братка. Надо поднабрать респекта у местных авторитетов\u003c/i\u003e\u003cbr\u003e\r\n\u003chr\u003e\r\n\u003cb\u003e\u003cy\u003eДля квартета освобожденных:\u003c/y\u003e\u003c/b\u003e\u003cbr\u003e\r\n\u003cbr\u003e\r\n- Вам нужно собрать 100 \"ванечков\" респекта!\u003cbr\u003e\r\n- В бонусах открыты места \"авторитетов\", где вы можете получить определенное количество \"ванечков\".\u003cbr\u003e\r\n- У каждого авторитета есть \u003cb\u003eИмя\u003c/b\u003e, \u003cb\u003eЛокация\u003c/b\u003e (где он находится) и \u003cb\u003eКоличество\u003c/b\u003e \"ванечков\", которое он дает.\u003cbr\u003e\r\n- Некоторые авторитеты требуют, чтобы вы до того как пойдете к ним - прошли других низкоуровневых авторитетов.\u003cbr\u003e\r\n- Чтобы получить допуск - скажите кодовые фразы от требуемых низкоуровневых авторитетов (Вы их получите закрыв бонусы этих авторитетов).\u003cbr\u003e\r\n- Для удобства вам будет доступен \"Ванечкометр\":\u003cbr\u003e\u003cbr\u003e\r\n\u003ccenter\u003e\u003ch3\u003eВанечкометр\u003c/h3\u003e\u003c/center\u003e\r\n\u003cdiv class=\"line\"\u003e\r\n    \u003cdiv class=\"line-value\"\u003e\u003c/div\u003e\r\n    \u003cdiv class=\"value\"\u003e\u003c/div\u003e\r\n  \u003c/div\u003e\r\n\u003ccenter\u003e\u003cdiv\u003eУ вас \u003cspan id=\"result\"\u003e0\u003c/span\u003e ванечков респекта\u003c/div\u003e \u003c/center\u003e\r\n\u003cbr\u003e\r\n\r\n\u003cb\u003e\u003ca id=\"show\"\u003e\u003cy\u003eДля остальных полевиков и штаба:\u003c/y\u003e\u003c/a\u003e\u003c/b\u003e\u003cbr\u003e\r\n\u003cbr\u003e\r\n\u003cp id=\"shtab\"\u003e\u003ci\u003eА не кинули ли меня часом, прибудут ли братаны за мной? Я уже свою шконку и нары видеть не могу\u003c/i\u003e\u003cbr\u003e\r\n\u003cbr\u003e\r\n\u003co\u003eЗона 1\u003c/o\u003e: поиск маркера\u003cbr\u003e\r\n\u003cm\u003eЗона поиска\u003c/m\u003e: Ближние 10 рядов кресел к оркестровой яме/cцене\u003cbr\u003e\r\n\u003cm\u003eКоличество кодов\u003c/m\u003e: 60\u003cbr\u003e\r\n\u003cm\u003eНанесение\u003c/m\u003e: маркер\u003cbr\u003e\r\n\u003cm\u003eБонусное время за каждый\u003c/m\u003e: 15 секунд\u003cbr\u003e\r\n\u003cbr\u003e\r\n\u003co\u003eЗона 2\u003c/o\u003e: поиск по метке\u003cbr\u003e\r\n\u003cm\u003eЗона поиска\u003c/m\u003e: Стены, сцена, оркестровая яма\u003cbr\u003e\r\n\u003cm\u003eКоличество меток\u003c/m\u003e: 30\u003cbr\u003e\r\n\u003cm\u003eКоличество кодов рядом с каждой меткой\u003c/m\u003e: 2, в радиусе 1.5-2 метров от метки\u003cbr\u003e\r\n\u003cm\u003eНанесение\u003c/m\u003e: маркер-микромаркер\u003cbr\u003e\r\n\u003cm\u003eБонусное время за каждый\u003c/m\u003e: 15 секунд\u003cbr\u003e\r\n\u003cbr\u003e\r\n\u003co\u003eЗона 3\u003c/o\u003e: поиск микромаркера\u003cbr\u003e\r\n\u003cm\u003eЗона поиска\u003c/m\u003e: Верхние ряды, начиная от входа, заканчивая центральным поперечным проходом \u003cbr\u003e\r\n\u003cm\u003eКоличество кодов\u003c/m\u003e: 102\u003cbr\u003e\r\n\u003cm\u003eНанесение\u003c/m\u003e: микромаркер\u003cbr\u003e\r\n\u003cm\u003eБонусное время за каждый\u003c/m\u003e: 30 секунд\u003cbr\u003e\r\n\u003cbr\u003e\r\n\u003ci\u003eПилите до тех пор, пока всю вашу команду не освободят\u003c/i\u003e\u003cbr\u003e\r\n\u003cbr\u003e\r\n\u003cb\u003e\u003cy\u003eДля штаба:\u003c/y\u003e\u003c/b\u003e\u003cbr\u003e\r\n\u003cbr\u003e\r\n\u003cb\u003eВрывайтесь и помогайте своему полю\u003c/b\u003e\u003cbr\u003eА так же вам доступны 6 бонусных логик.\u003cbr\u003e\r\n\u003c/p\u003e\r\n\u003cstyle\u003e#shtab{display:none} #show:hover{cursor:pointer}\u003c/style\u003e\r\n\r\n\u003cscript\u003e\r\n$(\u0027#show\u0027).click(function(){\r\n$( \"#shtab\" ).toggle( \"fast\", function() {\r\n});\r\n})\r\n\u003c/script\u003e\r\n\r\n\u003cstyle\u003e\r\nm{color:yellow}\r\ny{font-size:18px}\r\no{color:red}\r\n.line {\r\n      margin: 30px auto;\r\n      position: relative;\r\n      background-color: lightgrey;\r\n      opacity: 0.8;\r\n      height: 40px;\r\n      width: 80%;\r\n      border-radius: 25px;\r\n      background-image:\r\n         -webkit-gradient(linear, 0 0, 100% 100%,\r\n            color-stop(.25, rgba(255, 255, 255, .2)),\r\n            color-stop(.25, transparent), color-stop(.5, transparent),\r\n            color-stop(.5, rgba(255, 255, 255, .2)),\r\n            color-stop(.75, rgba(255, 255, 255, .2)),\r\n            color-stop(.75, transparent), to(transparent)\r\n         );\r\n    }\r\n    .line-value {\r\n      background-image:\r\n         -webkit-gradient(linear, 0 0, 100% 100%,\r\n            color-stop(.25, rgba(255, 255, 255, .2)),\r\n            color-stop(.25, transparent), color-stop(.5, transparent),\r\n            color-stop(.5, rgba(255, 255, 255, .2)),\r\n            color-stop(.75, rgba(255, 255, 255, .2)),\r\n            color-stop(.75, transparent), to(transparent)\r\n         );\r\n      background-color: darkorange;\r\n      height: 40px;\r\n      width: 00%;\r\n      border-top-left-radius: 25px;\r\n      border-bottom-left-radius: 25px;\r\n    }\r\n    .value {\r\n      position: absolute;\r\n      height: 100px;\r\n      width: 100px;\r\n      background-image: url(http://d1.endata.cx/data/games/58515/vane4ek3.png);\r\n      left: 00%;\r\n      top: 50%;\r\n      transform: translate(-50%, -50%);\r\n    }\r\n\u003c/style\u003e"
# }
require_relative 'bot_utils'

class Task
  include BotUtils
  attr_accessor :text, :coords

  def initialize(text)
    @text = text
    @coords = []
  end

  def self.from_json(task_json)
    Task.new(task_json['TaskText'])
  end

  def from_json(task_json)
    @text = task_json['TaskText']
  end

  def ==(other_object)
    other_object.class == self.class &&
      text == other_object.text
  end

  def to_text
    parsed_text = parsed(text)
    @coords = parsed_text[:coords]
    "Завдання:\n#{parsed_text[:text]}\n\n"
  end
end